-#  Copyright (c) 2026 German Contingent for the World Scout Jamboree 2027.
-#  This file is part of hitobito_wsjrdp_2027 and licensed under the
-#  Affero General Public License version 3 or later.
-#  See the COPYING file at the top-level directory or at
-#  https://github.com/smeky42/hitobito_wsjrdp_2027

-#  Copyright (c) 2012-2013, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

%div.d-flex.flex-wrap.w-100.align-items-center
  - attr_disabled = f.object.respond_to?(:can_edit_attribute?) ? ->(attr) { !f.object.can_edit_attribute?(attr, user: current_user) } : ->(attr) { false }
  %div.col-11.col-md-11.col-lg-5.col-xl-5.col-xxl-4.me-3
    = f.input_field(:email,
                    disabled: attr_disabled.call(:email),
                    placeholder: t('.placeholder_value'))
  %div.col-11.col-md-11.col-lg-5.col-xl-5.col-xxl-3.d-flex.flex-row.me-3.mt-1
    = f.input_field(:translated_label,
                    disabled: attr_disabled.call(:label),
                    placeholder: t('.placeholder_type'),
                    data: {provide: :typeahead, source: AdditionalEmail.available_labels})
  - if entry.is_a?(Person)
    = f.label(:mailings, class: 'col-12 col-sm-2 col-md-12 col-lg-3 col-xl-3 col-xxl-2 mt-sm-2 mt-md-0') do
      = f.check_box(:mailings, {disabled: attr_disabled.call(:mailings)})
      %span{'data-bs-toggle': 'tooltip', title: t('.tooltip_mailings'), class: ('disabled' if attr_disabled.call(:mailings))}
        = t(:"activerecord.attributes.additional_emails.mailings")
        %i.fas.fa-info
  = render 'contactable/public_check_box', f: f
